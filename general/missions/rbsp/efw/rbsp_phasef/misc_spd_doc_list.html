<!-- This file was generated by mk_html_help.pro -->
<html>
 
<head>
<TITLE>general/missions/rbsp/efw/rbsp_phasef/misc</TITLE>
</head>
 
<body>
<P>
This page was created by the IDL library routine 
<CODE>mk_html_help2</CODE>.
<br>
<P>
<STRONG>Last modified: </STRONG>Tue Aug  8 18:16:43 2023.<P>
 
<HR>
 
<A NAME="ROUTINELIST">
<H1>Directory Listing of Routines</H1></A>
<UL>
<H1>general/missions/rbsp/efw/rbsp_phasef/misc</H1>
<LI><A HREF="#AARON_FIG_6_1">AARON_FIG_6_1</A>
<LI><A HREF="#CALC_ECORO">CALC_ECORO</A>
<LI><A HREF="#CALC_EVXB">CALC_EVXB</A>
<LI><A HREF="#FIG_4_2_TIMELINE">FIG_4_2_TIMELINE</A>
<LI><A HREF="#FIG_6_1">FIG_6_1</A>
<LI><A HREF="#FIG_SAMPLE_RATE_FILTER_TIME_LAG">FIG_SAMPLE_RATE_FILTER_TIME_LAG
</A>
<LI><A HREF="#FINAL_PAPER_SDT_PLOT">FINAL_PAPER_SDT_PLOT</A>
<LI><A HREF="#GEN_YEARLY_BOOM_FLAG">GEN_YEARLY_BOOM_FLAG</A>
<LI><A HREF="#PATCH_FOR_L1_TIME_TAG_CORRECTION">PATCH_FOR_L1_TIME_TAG_CORRECTION
</A>
<LI><A HREF="#PATCH_FOR_L1_TIME_TAG_OF_LEAP_SECOND">
PATCH_FOR_L1_TIME_TAG_OF_LEAP_SECOND</A>
<LI><A HREF="#PATCH_ORBIT_NUM_FOR_L4">PATCH_ORBIT_NUM_FOR_L4</A>
<LI><A HREF="#PERIGEE_CORRECTION_PLOT1">PERIGEE_CORRECTION_PLOT1</A>
<LI><A HREF="#PLOT_EMFISIS_CORRECTION">PLOT_EMFISIS_CORRECTION</A>
<LI><A HREF="#PLOT_FIX_SPICE_UVW2GSE">PLOT_FIX_SPICE_UVW2GSE</A>
<LI><A HREF="#PLOT_L1_TIME_TAG_CORRECTION">PLOT_L1_TIME_TAG_CORRECTION</A>
<LI><A HREF="#PLOT_UVW2GSE_CORRECTION">PLOT_UVW2GSE_CORRECTION</A>
<LI><A HREF="#RBSP_EFW_PHASEF_FIX_L4_BFIELD">RBSP_EFW_PHASEF_FIX_L4_BFIELD</A>
<LI><A HREF="#RBSP_EFW_PHASEF_FIX_L4_LABEL">RBSP_EFW_PHASEF_FIX_L4_LABEL</A>
<LI><A HREF="#RBSP_EFW_PHASEF_FIX_LABELING_FOR_L2_ESVY_DESPUN">
RBSP_EFW_PHASEF_FIX_LABELING_FOR_L2_ESVY_DESPUN</A>
<LI><A HREF="#RBSP_EFW_PHASEF_GEN_L2_ESVY_DESPUN">
RBSP_EFW_PHASEF_GEN_L2_ESVY_DESPUN</A>
<LI><A HREF="#RBSP_EFW_PHASEF_GET_SERVER[2]">RBSP_EFW_PHASEF_GET_SERVER[2]</A>
<LI><A HREF="#RBSP_EFW_PHASEF_LOCAL_ROOT">RBSP_EFW_PHASEF_LOCAL_ROOT</A>
<LI><A HREF="#RBSP_EFW_PHASEF_READ_B_MGSE[2]">RBSP_EFW_PHASEF_READ_B_MGSE[2]</A>
<LI><A HREF="#RBSP_EFW_PHASEF_READ_R_MGSE">RBSP_EFW_PHASEF_READ_R_MGSE</A>
<LI><A HREF="#RBSP_EFW_PHASEF_READ_V_MGSE">RBSP_EFW_PHASEF_READ_V_MGSE</A>
<LI><A HREF="#RBSP_EFW_PHASEF_SCAN_VB1_SPLIT_DATA_RATE">
RBSP_EFW_PHASEF_SCAN_VB1_SPLIT_DATA_RATE</A>
<LI><A HREF="#RBSP_EFW_PHASEF_SPICE_VAR_ADD_LABELING">
RBSP_EFW_PHASEF_SPICE_VAR_ADD_LABELING</A>
<LI><A HREF="#RBSP_EFW_READ_L1_TIME_TAG_CORRECTION[2]">
RBSP_EFW_READ_L1_TIME_TAG_CORRECTION[2]</A>
<LI><A HREF="#RBSP_EFW_READ_L1_TIME_TAG_CORRECTION_GEN_FILE">
RBSP_EFW_READ_L1_TIME_TAG_CORRECTION_GEN_FILE</A>
<LI><A HREF="#RBSP_FIX_B_UVW">RBSP_FIX_B_UVW</A>
<LI><A HREF="#RBSP_FIX_Q_UVW2GSE">RBSP_FIX_Q_UVW2GSE</A>
<LI><A HREF="#RBSP_PHASEF_FIT_PER_MANEUVER">RBSP_PHASEF_FIT_PER_MANEUVER</A>
<LI><A HREF="#RBSP_PHASEF_LOAD_FIT_QUANTITIES">RBSP_PHASEF_LOAD_FIT_QUANTITIES
</A>
<LI><A HREF="#RBSP_PHASEF_READ_FIT_COEF_V01">RBSP_PHASEF_READ_FIT_COEF_V01</A>
<LI><A HREF="#RBSP_PHASEF_READ_FIT_COEF_V02">RBSP_PHASEF_READ_FIT_COEF_V02</A>
<LI><A HREF="#RBSP_PHASEF_READ_FIT_TIMES">RBSP_PHASEF_READ_FIT_TIMES</A>
<LI><A HREF="#RBSP_REMOVE_SPINTONE">RBSP_REMOVE_SPINTONE</A>
<LI><A HREF="#SAVE_RBSP_SDT_TIME_RANGES">SAVE_RBSP_SDT_TIME_RANGES</A>
<LI><A HREF="#SCAN_FOR_TIME_TAG_IRREGULARITY">SCAN_FOR_TIME_TAG_IRREGULARITY</A>
<LI><A HREF="#TPLOT_EFIELD">TPLOT_EFIELD</A>
<LI><A HREF="#WYGANT_ADD_E_COMBO_TO_YEARLY_FILES">
WYGANT_ADD_E_COMBO_TO_YEARLY_FILES</A>
<LI><A HREF="#WYGANT_GEN_YEARLY_FILES">WYGANT_GEN_YEARLY_FILES</A>
<br>
</UL><P>
<HR>
 
<H1>Routine Descriptions</H1>
<A NAME="AARON_FIG_6_1">
<H2>AARON_FIG_6_1</H2></A>
<A HREF="#CALC_ECORO">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Generate Fig 6.1 for Aaron for the instrument paper.
</PRE><P>
<STRONG>(See <A href="misc/aaron_fig_6_1.pro">general/missions/rbsp/efw/rbsp_phasef/misc/aaron_fig_6_1.pro</A>)</STRONG><P>
<HR>
 
<A NAME="CALC_ECORO">
<H2>CALC_ECORO</H2></A>
<A HREF="#AARON_FIG_6_1">[Previous Routine]</A>
<A HREF="#CALC_EVXB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Calculate the E_coro from r_coord and b_coord.
 They need to be in the same coord.

 b_var=.
 r_var=.
 save_to=.
 probe=.
</PRE><P>
<STRONG>(See <A href="misc/calc_ecoro.pro">general/missions/rbsp/efw/rbsp_phasef/misc/calc_ecoro.pro</A>)</STRONG><P>
<HR>
 
<A NAME="CALC_EVXB">
<H2>CALC_EVXB</H2></A>
<A HREF="#CALC_ECORO">[Previous Routine]</A>
<A HREF="#FIG_4_2_TIMELINE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Calculate the E_vxb due to Vsc x B.
 They need to be in the same coord.

 b_var=.
 v_var=.
 r_var=.
 save_to=.
 probe=.
</PRE><P>
<STRONG>(See <A href="misc/calc_evxb.pro">general/missions/rbsp/efw/rbsp_phasef/misc/calc_evxb.pro</A>)</STRONG><P>
<HR>
 
<A NAME="FIG_4_2_TIMELINE">
<H2>FIG_4_2_TIMELINE</H2></A>
<A HREF="#CALC_EVXB">[Previous Routine]</A>
<A HREF="#FIG_6_1">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Plot the data timeline.

 Adopted from EFW_dataproduct_timeline.py.
</PRE><P>
<STRONG>(See <A href="misc/fig_4_2_timeline.pro">general/missions/rbsp/efw/rbsp_phasef/misc/fig_4_2_timeline.pro</A>)</STRONG><P>
<HR>
 
<A NAME="FIG_6_1">
<H2>FIG_6_1</H2></A>
<A HREF="#FIG_4_2_TIMELINE">[Previous Routine]</A>
<A HREF="#FIG_SAMPLE_RATE_FILTER_TIME_LAG">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Generate Fig 6.1 for Aaron for the instrument paper.
</PRE><P>
<STRONG>(See <A href="misc/fig_6_1.pro">general/missions/rbsp/efw/rbsp_phasef/misc/fig_6_1.pro</A>)</STRONG><P>
<HR>
 
<A NAME="FIG_SAMPLE_RATE_FILTER_TIME_LAG">
<H2>FIG_SAMPLE_RATE_FILTER_TIME_LAG</H2></A>
<A HREF="#FIG_6_1">[Previous Routine]</A>
<A HREF="#FINAL_PAPER_SDT_PLOT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Plot the sampling rate dependent time tag offset and the expected time lag due to the anti-aliasing filter
</PRE><P>
<STRONG>(See <A href="misc/fig_sample_rate_filter_time_lag.pro">general/missions/rbsp/efw/rbsp_phasef/misc/fig_sample_rate_filter_time_lag.pro</A>)</STRONG><P>
<HR>
 
<A NAME="FINAL_PAPER_SDT_PLOT">
<H2>FINAL_PAPER_SDT_PLOT</H2></A>
<A HREF="#FIG_SAMPLE_RATE_FILTER_TIME_LAG">[Previous Routine]</A>
<A HREF="#GEN_YEARLY_BOOM_FLAG">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Draw an example of SDT.
</PRE><P>
<STRONG>(See <A href="misc/final_paper_sdt_plot.pro">general/missions/rbsp/efw/rbsp_phasef/misc/final_paper_sdt_plot.pro</A>)</STRONG><P>
<HR>
 
<A NAME="GEN_YEARLY_BOOM_FLAG">
<H2>GEN_YEARLY_BOOM_FLAG</H2></A>
<A HREF="#FINAL_PAPER_SDT_PLOT">[Previous Routine]</A>
<A HREF="#PATCH_FOR_L1_TIME_TAG_CORRECTION">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Generate yearly boom flag CDF.
</PRE><P>
<STRONG>(See <A href="misc/gen_yearly_boom_flag.pro">general/missions/rbsp/efw/rbsp_phasef/misc/gen_yearly_boom_flag.pro</A>)</STRONG><P>
<HR>
 
<A NAME="PATCH_FOR_L1_TIME_TAG_CORRECTION">
<H2>PATCH_FOR_L1_TIME_TAG_CORRECTION</H2></A>
<A HREF="#GEN_YEARLY_BOOM_FLAG">[Previous Routine]</A>
<A HREF="#PATCH_FOR_L1_TIME_TAG_OF_LEAP_SECOND">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Some files do not have the correct L1 time tag correction.
 Reprocess thoes files.
</PRE><P>
<STRONG>(See <A href="misc/patch_for_l1_time_tag_correction.pro">general/missions/rbsp/efw/rbsp_phasef/misc/patch_for_l1_time_tag_correction.pro</A>)</STRONG><P>
<HR>
 
<A NAME="PATCH_FOR_L1_TIME_TAG_OF_LEAP_SECOND">
<H2>PATCH_FOR_L1_TIME_TAG_OF_LEAP_SECOND</H2></A>
<A HREF="#PATCH_FOR_L1_TIME_TAG_CORRECTION">[Previous Routine]</A>
<A HREF="#PATCH_ORBIT_NUM_FOR_L4">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 There are days when there is a -1 sec jump in time tag, but looks like leap second. However, they need to be treated because the time tag is still non-monotonic.
</PRE><P>
<STRONG>(See <A href="misc/patch_for_l1_time_tag_of_leap_second.pro">general/missions/rbsp/efw/rbsp_phasef/misc/patch_for_l1_time_tag_of_leap_second.pro</A>)</STRONG><P>
<HR>
 
<A NAME="PATCH_ORBIT_NUM_FOR_L4">
<H2>PATCH_ORBIT_NUM_FOR_L4</H2></A>
<A HREF="#PATCH_FOR_L1_TIME_TAG_OF_LEAP_SECOND">[Previous Routine]</A>
<A HREF="#PERIGEE_CORRECTION_PLOT1">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Patch to add orbit_num to l4 spinfit, b/c this is slow to load.
</PRE><P>
<STRONG>(See <A href="misc/patch_orbit_num_for_l4.pro">general/missions/rbsp/efw/rbsp_phasef/misc/patch_orbit_num_for_l4.pro</A>)</STRONG><P>
<HR>
 
<A NAME="PERIGEE_CORRECTION_PLOT1">
<H2>PERIGEE_CORRECTION_PLOT1</H2></A>
<A HREF="#PATCH_ORBIT_NUM_FOR_L4">[Previous Routine]</A>
<A HREF="#PLOT_EMFISIS_CORRECTION">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Plot Ey and Ez in MGSE.
 Compare E_measure-E_coro and E_vxb
</PRE><P>
<STRONG>(See <A href="misc/perigee_correction_plot1.pro">general/missions/rbsp/efw/rbsp_phasef/misc/perigee_correction_plot1.pro</A>)</STRONG><P>
<HR>
 
<A NAME="PLOT_EMFISIS_CORRECTION">
<H2>PLOT_EMFISIS_CORRECTION</H2></A>
<A HREF="#PERIGEE_CORRECTION_PLOT1">[Previous Routine]</A>
<A HREF="#PLOT_FIX_SPICE_UVW2GSE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Show B GSE before and after UVW2GSE is fixed.
</PRE><P>
<STRONG>(See <A href="misc/plot_emfisis_correction.pro">general/missions/rbsp/efw/rbsp_phasef/misc/plot_emfisis_correction.pro</A>)</STRONG><P>
<HR>
 
<A NAME="PLOT_FIX_SPICE_UVW2GSE">
<H2>PLOT_FIX_SPICE_UVW2GSE</H2></A>
<A HREF="#PLOT_EMFISIS_CORRECTION">[Previous Routine]</A>
<A HREF="#PLOT_L1_TIME_TAG_CORRECTION">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Plot spin-axis in GSE before and after correcting for spin tone.
</PRE><P>
<STRONG>(See <A href="misc/plot_fix_spice_uvw2gse.pro">general/missions/rbsp/efw/rbsp_phasef/misc/plot_fix_spice_uvw2gse.pro</A>)</STRONG><P>
<HR>
 
<A NAME="PLOT_L1_TIME_TAG_CORRECTION">
<H2>PLOT_L1_TIME_TAG_CORRECTION</H2></A>
<A HREF="#PLOT_FIX_SPICE_UVW2GSE">[Previous Routine]</A>
<A HREF="#PLOT_UVW2GSE_CORRECTION">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Plot the start and end of section.
</PRE><P>
<STRONG>(See <A href="misc/plot_l1_time_tag_correction.pro">general/missions/rbsp/efw/rbsp_phasef/misc/plot_l1_time_tag_correction.pro</A>)</STRONG><P>
<HR>
 
<A NAME="PLOT_UVW2GSE_CORRECTION">
<H2>PLOT_UVW2GSE_CORRECTION</H2></A>
<A HREF="#PLOT_L1_TIME_TAG_CORRECTION">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_FIX_L4_BFIELD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Show R MGSE before and after UVW2GSE is fixed.
</PRE><P>
<STRONG>(See <A href="misc/plot_uvw2gse_correction.pro">general/missions/rbsp/efw/rbsp_phasef/misc/plot_uvw2gse_correction.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_FIX_L4_BFIELD">
<H2>RBSP_EFW_PHASEF_FIX_L4_BFIELD</H2></A>
<A HREF="#PLOT_UVW2GSE_CORRECTION">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_FIX_L4_LABEL">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 The B field related quantites are incorrect.

 This is now fixed in rbsp_efw_read_l4_gen_file.
 It's too slow to run that, so we only run the code for B field over.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_fix_l4_bfield.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_fix_l4_bfield.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_FIX_L4_LABEL">
<H2>RBSP_EFW_PHASEF_FIX_L4_LABEL</H2></A>
<A HREF="#RBSP_EFW_PHASEF_FIX_L4_BFIELD">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_FIX_LABELING_FOR_L2_ESVY_DESPUN">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Load skeleton file and add missing labels.

 This is already fixed in rbsp_efw_read_l4_gen_file.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_fix_l4_label.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_fix_l4_label.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_FIX_LABELING_FOR_L2_ESVY_DESPUN">
<H2>RBSP_EFW_PHASEF_FIX_LABELING_FOR_L2_ESVY_DESPUN</H2></A>
<A HREF="#RBSP_EFW_PHASEF_FIX_L4_LABEL">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_GEN_L2_ESVY_DESPUN">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Fix labeling for L2 esvy_despun.

 old_root=. The root dir down to the old CDFs of esvy_despun.
 new_root=. The root dir for the new CDFs.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_fix_labeling_for_l2_esvy_despun.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_fix_labeling_for_l2_esvy_despun.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_GEN_L2_ESVY_DESPUN">
<H2>RBSP_EFW_PHASEF_GEN_L2_ESVY_DESPUN</H2></A>
<A HREF="#RBSP_EFW_PHASEF_FIX_LABELING_FOR_L2_ESVY_DESPUN
">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_GET_SERVER[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 refer to rbsp_efw_make_l2.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_gen_l2_esvy_despun.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_gen_l2_esvy_despun.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_GET_SERVER[2]">
<H2>RBSP_EFW_PHASEF_GET_SERVER[2]</H2></A>
<A HREF="#RBSP_EFW_PHASEF_GEN_L2_ESVY_DESPUN">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_LOCAL_ROOT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This is to easily switch among servers to download requested CDF.
 Adopted from rbsp_load_wake_effect_cdf_file.
 This program is supposed to be updated frequently during the phasef tests.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_get_server.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_get_server.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_LOCAL_ROOT">
<H2>RBSP_EFW_PHASEF_LOCAL_ROOT</H2></A>
<A HREF="#RBSP_EFW_PHASEF_GET_SERVER[2]">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_READ_B_MGSE[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Set the local root for saving RBSP data.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_local_root.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_local_root.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_READ_B_MGSE[2]">
<H2>RBSP_EFW_PHASEF_READ_B_MGSE[2]</H2></A>
<A HREF="#RBSP_EFW_PHASEF_LOCAL_ROOT">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_READ_R_MGSE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Preprocess and load b_mgse to memory.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_read_b_mgse.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_read_b_mgse.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_READ_R_MGSE">
<H2>RBSP_EFW_PHASEF_READ_R_MGSE</H2></A>
<A HREF="#RBSP_EFW_PHASEF_READ_B_MGSE[2]">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_READ_V_MGSE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Preprocess and load r_mgse to memory.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_read_r_mgse.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_read_r_mgse.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_READ_V_MGSE">
<H2>RBSP_EFW_PHASEF_READ_V_MGSE</H2></A>
<A HREF="#RBSP_EFW_PHASEF_READ_R_MGSE">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_SCAN_VB1_SPLIT_DATA_RATE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Preprocess and load v_mgse to memory.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_read_v_mgse.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_read_v_mgse.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_SCAN_VB1_SPLIT_DATA_RATE">
<H2>RBSP_EFW_PHASEF_SCAN_VB1_SPLIT_DATA_RATE</H2></A>
<A HREF="#RBSP_EFW_PHASEF_READ_V_MGSE">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_SPICE_VAR_ADD_LABELING">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Scan all vb1_split files for time_range and data_rate.
 Needs to run on a computer with all vb1 or vb1_split data are downloaded.

 data_dir. Data should be saved at data_dir/YYYY/*.cdf.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_scan_vb1_split_data_rate.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_scan_vb1_split_data_rate.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_SPICE_VAR_ADD_LABELING">
<H2>RBSP_EFW_PHASEF_SPICE_VAR_ADD_LABELING</H2></A>
<A HREF="#RBSP_EFW_PHASEF_SCAN_VB1_SPLIT_DATA_RATE">[Previous Routine]</A>
<A HREF="#RBSP_EFW_READ_L1_TIME_TAG_CORRECTION[2]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Add labeling to v08 files, to make sure variables are properly labeled.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_phasef_spice_var_add_labeling.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_phasef_spice_var_add_labeling.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_READ_L1_TIME_TAG_CORRECTION[2]">
<H2>RBSP_EFW_READ_L1_TIME_TAG_CORRECTION[2]</H2></A>
<A HREF="#RBSP_EFW_PHASEF_SPICE_VAR_ADD_LABELING">[Previous Routine]</A>
<A HREF="#RBSP_EFW_READ_L1_TIME_TAG_CORRECTION_GEN_FILE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Read the time range of sections shifted in time tag, and the correction.
 Data adopted from the txt file generated by rbsp_efw_read_l1_time_tag_correction_gen_file.
 
 The tplot_var is 'rbspx_l1_time_tag_correction', to use
    get_data, 'rbspa_l1_time_tag_correction', start_times, time_ranges, corrections
    nsection = n_elements(corrections)
   
    foo_l1_efw_data = 'rbspa_efw_esvy'
    get_data, foo_l1_efw_data, times, data
    for ii=0, nsection-1 do begin
        tmp = where(times ge time_ranges[ii,0] and times le time_ranges[ii,1], count)
        if count eq 0 then continue
        ; Have to find the closest time, otherwise the index can be 1 record off.
        if min(times) ge correction_time_ranges[ii,0] then i0 = 0 else begin
            index = min(times-correction_time_ranges[ii,0], /absolute, i0)
        endelse
        if max(times) le correction_time_ranges[ii,1] then i1 = n_elements(times) else begin
            index = min(times-correction_time_ranges[ii,1], /absolute, i1)
        endelse
        times[i0:i1-1] += corrections[ii]
    endfor
    store_data, foo_l1_efw_data, times, data
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_read_l1_time_tag_correction.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_read_l1_time_tag_correction.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_READ_L1_TIME_TAG_CORRECTION_GEN_FILE">
<H2>RBSP_EFW_READ_L1_TIME_TAG_CORRECTION_GEN_FILE</H2></A>
<A HREF="#RBSP_EFW_READ_L1_TIME_TAG_CORRECTION[2]">[Previous Routine]</A>
<A HREF="#RBSP_FIX_B_UVW">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Write the start and end time of sections shifted in time tag, and the wanted correction.
 To correct: read data in the time range, add the correction to the old_times:
   new_times = old_times+correction
</PRE><P>
<STRONG>(See <A href="misc/rbsp_efw_read_l1_time_tag_correction_gen_file.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_efw_read_l1_time_tag_correction_gen_file.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_FIX_B_UVW">
<H2>RBSP_FIX_B_UVW</H2></A>
<A HREF="#RBSP_EFW_READ_L1_TIME_TAG_CORRECTION_GEN_FILE">[Previous Routine]</A>
<A HREF="#RBSP_FIX_Q_UVW2GSE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Fix spin tone in B UVW, remove bad data.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_fix_b_uvw.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_fix_b_uvw.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_FIX_Q_UVW2GSE">
<H2>RBSP_FIX_Q_UVW2GSE</H2></A>
<A HREF="#RBSP_FIX_B_UVW">[Previous Routine]</A>
<A HREF="#RBSP_PHASEF_FIT_PER_MANEUVER">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Fix spin tone and other artificial signals in UVW2GSE.
 The assumption is that, attitude evovles slowly in time, except during eclipse and maneuver.

 time_range. The time range in sec.
 probe=.
 restore_eclipse=. Set to restore attitude during eclipse.
 restore_maneuver=. Set to restore attitude during maenuver.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_fix_q_uvw2gse.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_fix_q_uvw2gse.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_PHASEF_FIT_PER_MANEUVER">
<H2>RBSP_PHASEF_FIT_PER_MANEUVER</H2></A>
<A HREF="#RBSP_FIX_Q_UVW2GSE">[Previous Routine]</A>
<A HREF="#RBSP_PHASEF_LOAD_FIT_QUANTITIES">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Fit E_measure-E_model per maneuver.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_phasef_fit_per_maneuver.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_phasef_fit_per_maneuver.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_PHASEF_LOAD_FIT_QUANTITIES">
<H2>RBSP_PHASEF_LOAD_FIT_QUANTITIES</H2></A>
<A HREF="#RBSP_PHASEF_FIT_PER_MANEUVER">[Previous Routine]</A>
<A HREF="#RBSP_PHASEF_READ_FIT_COEF_V01">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Load quantities for fitting perigee corrections.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_phasef_load_fit_quantities.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_phasef_load_fit_quantities.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_PHASEF_READ_FIT_COEF_V01">
<H2>RBSP_PHASEF_READ_FIT_COEF_V01</H2></A>
<A HREF="#RBSP_PHASEF_LOAD_FIT_QUANTITIES">[Previous Routine]</A>
<A HREF="#RBSP_PHASEF_READ_FIT_COEF_V02">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Fit E_measure-E_model per maneuver.

 time_range. Optional, used because at early stage not all data are available.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_phasef_read_fit_coef_v01.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_phasef_read_fit_coef_v01.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_PHASEF_READ_FIT_COEF_V02">
<H2>RBSP_PHASEF_READ_FIT_COEF_V02</H2></A>
<A HREF="#RBSP_PHASEF_READ_FIT_COEF_V01">[Previous Routine]</A>
<A HREF="#RBSP_PHASEF_READ_FIT_TIMES">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Fit E_measure-E_model per maneuver.

 time_range. Optional, used because at early stage not all data are available.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_phasef_read_fit_coef_v02.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_phasef_read_fit_coef_v02.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_PHASEF_READ_FIT_TIMES">
<H2>RBSP_PHASEF_READ_FIT_TIMES</H2></A>
<A HREF="#RBSP_PHASEF_READ_FIT_COEF_V02">[Previous Routine]</A>
<A HREF="#RBSP_REMOVE_SPINTONE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Read the section times to do fit, in [n,2].
 Ensure that each section is long enough to contain &gt;3 perigees.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_phasef_read_fit_times.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_phasef_read_fit_times.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_REMOVE_SPINTONE">
<H2>RBSP_REMOVE_SPINTONE</H2></A>
<A HREF="#RBSP_PHASEF_READ_FIT_TIMES">[Previous Routine]</A>
<A HREF="#SAVE_RBSP_SDT_TIME_RANGES">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Remove spin tone in RBSP data.
</PRE><P>
<STRONG>(See <A href="misc/rbsp_remove_spintone.pro">general/missions/rbsp/efw/rbsp_phasef/misc/rbsp_remove_spintone.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SAVE_RBSP_SDT_TIME_RANGES">
<H2>SAVE_RBSP_SDT_TIME_RANGES</H2></A>
<A HREF="#RBSP_REMOVE_SPINTONE">[Previous Routine]</A>
<A HREF="#SCAN_FOR_TIME_TAG_IRREGULARITY">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Save the time ranges of SDT.
</PRE><P>
<STRONG>(See <A href="misc/save_rbsp_sdt_time_ranges.pro">general/missions/rbsp/efw/rbsp_phasef/misc/save_rbsp_sdt_time_ranges.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SCAN_FOR_TIME_TAG_IRREGULARITY">
<H2>SCAN_FOR_TIME_TAG_IRREGULARITY</H2></A>
<A HREF="#SAVE_RBSP_SDT_TIME_RANGES">[Previous Routine]</A>
<A HREF="#TPLOT_EFIELD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Scan L2 esvy data for irregular time tags.
</PRE><P>
<STRONG>(See <A href="misc/scan_for_time_tag_irregularity.pro">general/missions/rbsp/efw/rbsp_phasef/misc/scan_for_time_tag_irregularity.pro</A>)</STRONG><P>
<HR>
 
<A NAME="TPLOT_EFIELD">
<H2>TPLOT_EFIELD</H2></A>
<A HREF="#SCAN_FOR_TIME_TAG_IRREGULARITY">[Previous Routine]</A>
<A HREF="#WYGANT_ADD_E_COMBO_TO_YEARLY_FILES">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Specially designed to plot E field, with 3 dyanmic ranges:
   [-1,1]*5 mV/m to show small field.
   [-1,1]*50 mV/m to show large field.
   [-1,1]*500 mV/m to show very large and invalid field.
</PRE><P>
<STRONG>(See <A href="misc/tplot_efield.pro">general/missions/rbsp/efw/rbsp_phasef/misc/tplot_efield.pro</A>)</STRONG><P>
<HR>
 
<A NAME="WYGANT_ADD_E_COMBO_TO_YEARLY_FILES">
<H2>WYGANT_ADD_E_COMBO_TO_YEARLY_FILES</H2></A>
<A HREF="#TPLOT_EFIELD">[Previous Routine]</A>
<A HREF="#WYGANT_GEN_YEARLY_FILES">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Add Ey V13, V14, V23, V24
 Add Ez V13, V14, V23, V24
</PRE><P>
<STRONG>(See <A href="misc/wygant_add_e_combo_to_yearly_files.pro">general/missions/rbsp/efw/rbsp_phasef/misc/wygant_add_e_combo_to_yearly_files.pro</A>)</STRONG><P>
<HR>
 
<A NAME="WYGANT_GEN_YEARLY_FILES">
<H2>WYGANT_GEN_YEARLY_FILES</H2></A>
<A HREF="#WYGANT_ADD_E_COMBO_TO_YEARLY_FILES">[Previous Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Generate yearly files include:
   1. Ey V12 V34
   2. Ez V12 V34
   3. Ey wake V12 V34
   4. Ez wake V12 V34
</PRE><P>
<STRONG>(See <A href="misc/wygant_gen_yearly_files.pro">general/missions/rbsp/efw/rbsp_phasef/misc/wygant_gen_yearly_files.pro</A>)</STRONG><P>
<HR>
 
