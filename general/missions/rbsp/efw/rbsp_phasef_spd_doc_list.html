<!-- This file was generated by mk_html_help.pro -->
<html>
 
<head>
<TITLE>general/missions/rbsp/efw/rbsp_phasef</TITLE>
</head>
 
<body>
<P>
This page was created by the IDL library routine 
<CODE>mk_html_help2</CODE>.
<br>
<P>
<STRONG>Last modified: </STRONG>Thu Aug  3 18:16:35 2023.<P>
 
<HR>
 
<A NAME="ROUTINELIST">
<H1>Directory Listing of Routines</H1></A>
<UL>
<H1>general/missions/rbsp/efw/rbsp_phasef</H1>
<LI><A HREF="#RBSP_EFW_CALC_EDOTB_TO_ZERO">RBSP_EFW_CALC_EDOTB_TO_ZERO</A>
<LI><A HREF="#RBSP_EFW_PHASEF_GET_SERVER[1]">RBSP_EFW_PHASEF_GET_SERVER[1]</A>
<LI><A HREF="#RBSP_EFW_PHASEF_READ_B1_SPLIT">RBSP_EFW_PHASEF_READ_B1_SPLIT</A>
<LI><A HREF="#RBSP_EFW_PHASEF_READ_DC_OFFSET[1]">
RBSP_EFW_PHASEF_READ_DC_OFFSET[1]</A>
<LI><A HREF="#RBSP_EFW_PHASEF_READ_SPINFIT_EFIELD">
RBSP_EFW_PHASEF_READ_SPINFIT_EFIELD</A>
<LI><A HREF="#RBSP_EFW_PHASEF_READ_VB1">RBSP_EFW_PHASEF_READ_VB1</A>
<LI><A HREF="#RBSP_EFW_PHASEF_SPINFIT (PROCEDURE)">
RBSP_EFW_PHASEF_SPINFIT (PROCEDURE)</A>
<br>Derive spin-fit E-field from instantaneous E-field measurements. The
<LI><A HREF="#RBSP_READ_DE_MGSE">RBSP_READ_DE_MGSE</A>
<br>
</UL><P>
<HR>
 
<H1>Routine Descriptions</H1>
<A NAME="RBSP_EFW_CALC_EDOTB_TO_ZERO">
<H2>RBSP_EFW_CALC_EDOTB_TO_ZERO</H2></A>
<A HREF="#RBSP_EFW_PHASEF_GET_SERVER[1]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 e_var. The tplot var saves 3D E field in certain coord.
 b_var. The tplot var saves 3D B field in the same coord.
 newname=. Set this to saves the new 3D E field to newname, otherwise will overwrite e_var.
 anglemin=. The min angle for E dot B = 0. 15 deg by default.
 no_preprocess=. A boolean, set to skip the interpolation and smoothing on b_var.
</PRE><P>
<STRONG>(See <A href="rbsp_phasef/rbsp_efw_calc_edotb_to_zero.pro">general/missions/rbsp/efw/rbsp_phasef/rbsp_efw_calc_edotb_to_zero.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_GET_SERVER[1]">
<H2>RBSP_EFW_PHASEF_GET_SERVER[1]</H2></A>
<A HREF="#RBSP_EFW_CALC_EDOTB_TO_ZERO">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_READ_B1_SPLIT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 This is to easily switch among servers to download requested CDF.
 Adopted from rbsp_load_wake_effect_cdf_file.
 This program is supposed to be updated frequently during the phasef tests.
</PRE><P>
<STRONG>(See <A href="rbsp_phasef/rbsp_efw_phasef_get_server.pro">general/missions/rbsp/efw/rbsp_phasef/rbsp_efw_phasef_get_server.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_READ_B1_SPLIT">
<H2>RBSP_EFW_PHASEF_READ_B1_SPLIT</H2></A>
<A HREF="#RBSP_EFW_PHASEF_GET_SERVER[1]">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_READ_DC_OFFSET[1]">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Read VB1 data, the splitited version.
 
 time. The time range in unix timestamp.
 probe=. 'a' or 'b'.
 id=. 'vb1', 'mscb1', or 'eb1'.
</PRE><P>
<STRONG>(See <A href="rbsp_phasef/rbsp_efw_phasef_read_b1_split.pro">general/missions/rbsp/efw/rbsp_phasef/rbsp_efw_phasef_read_b1_split.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_READ_DC_OFFSET[1]">
<H2>RBSP_EFW_PHASEF_READ_DC_OFFSET[1]</H2></A>
<A HREF="#RBSP_EFW_PHASEF_READ_B1_SPLIT">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_READ_SPINFIT_EFIELD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Read the DC offset from L1 esvy.
 Adopted from rbsp_efw_phasef_read_e_uvw_gen_file.
 Store data to tplot var: rbspx_efw_e_uvw_dc_offset.
</PRE><P>
<STRONG>(See <A href="rbsp_phasef/rbsp_efw_phasef_read_dc_offset.pro">general/missions/rbsp/efw/rbsp_phasef/rbsp_efw_phasef_read_dc_offset.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_READ_SPINFIT_EFIELD">
<H2>RBSP_EFW_PHASEF_READ_SPINFIT_EFIELD</H2></A>
<A HREF="#RBSP_EFW_PHASEF_READ_DC_OFFSET[1]">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_READ_VB1">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Read spinfit E field in MGSE for all boom pairs.
</PRE><P>
<STRONG>(See <A href="rbsp_phasef/rbsp_efw_phasef_read_spinfit_efield.pro">general/missions/rbsp/efw/rbsp_phasef/rbsp_efw_phasef_read_spinfit_efield.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_READ_VB1">
<H2>RBSP_EFW_PHASEF_READ_VB1</H2></A>
<A HREF="#RBSP_EFW_PHASEF_READ_SPINFIT_EFIELD">[Previous Routine]</A>
<A HREF="#RBSP_EFW_PHASEF_SPINFIT (PROCEDURE)">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Read VB1 data, the splitited version.
</PRE><P>
<STRONG>(See <A href="rbsp_phasef/rbsp_efw_phasef_read_vb1.pro">general/missions/rbsp/efw/rbsp_phasef/rbsp_efw_phasef_read_vb1.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_PHASEF_SPINFIT (PROCEDURE)">
<H2>RBSP_EFW_PHASEF_SPINFIT (PROCEDURE)</H2></A>
<A HREF="#RBSP_EFW_PHASEF_READ_VB1">[Previous Routine]</A>
<A HREF="#RBSP_READ_DE_MGSE">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Adopted from rbsp_efw_phasef_spinfit, but changed the part to get sunpulse_times.

 NAME:
   rbsp_efw_phasef_spinfit (procedure)

 PURPOSE:
   Derive spin-fit E-field from instantaneous E-field measurements. The
   spin-fit model is as such:
           fit = A + B * cos(phi) + C * sin(phi)
   where B and C are E-fields in the DSC X and Y dimensions, and angle is the
   angle between the DSC X direction and the EFW spin plane boom used in the
   spin-fit derivation, as demonstrated below.

       DSC Y
            |       / EFW spin plane boom
            |      /
            |     /
            |    /
            |   /
            |  /
            | /
            |/)angle________ DSC X

   NOTES: 1. Similar to thm_spinfit.pro, this routine is a wrapper of
             spinfit.pro for RBSP. Unlike thm_spinfit, this routine only works
             on one tplot variable at a time.
          2. Normally, this routine saves four tplot variables, such as
                  'rbspa_efw_esvy_spinfit_a'
                  'rbspa_efw_esvy_spinfit_b'
                  'rbspa_efw_esvy_spinfit_c'
                  'rbspa_efw_esvy_spinfit'
             where the first three are the three cooefficients from the fit and
             the last one is like a normal EFW data type in DSC.
          3. This routine passes a [n,3] waveform to spinfit.pro for spinfitting.
             spinfit.pro does stuff with all three components, but since we're only
             interested in getting the RBSP spinplane spinfit field, the only
             component that matters is the one you're interested in using to do
             the spinfit.
 CATEGORIES:

 CALLING SEQUENCE:
   rbsp_efw_phasef_spinfit ,var_name_in, $
             sigma=sigma, npoints=npoints, spinaxis=spinaxis, median=median, $
             plane_dim=plane_dim, axis_dim=axis_dim,  $
             min_points=min_points,alpha=alpha,beta=beta, $
             phase_mask_starts=phase_mask_starts, $
             phase_mask_ends=phase_mask_ends, $
             sc = sc, force = force, tper = tper, tphase = tphase

 ARGUMENTS:
   var_name_in: IN, REQUIRED
         EFW tplot data used for the spin-fit derivation. Must be in UVW.

 KEYWORDS:
   sc: IN, OPTIONAL
         Spacecraft name. Must be 'a' or 'b'.
   /force: IN, OPTIONAL
         If set, force to do the derivation. Useful when the input tplot data
         do not have coord_sys information.
   tper: IN, OPTIONAL
         Spin-period tplot name.
   tphase: IN, OPTIONAL
         Spin-phase tplot name.

     See spinfit.pro and thm_spinfit.pro for usage of other keywords.
     Exception:
     AXIS_DIM defaults to 2 instead of 0 in this routine.

 COMMON BLOCKS:

 EXAMPLES:

 SEE ALSO:

 HISTORY:
   2013-01-22: Created by Jianbao Tao (JBT), SSL, UC Berkley.


 VERSION:
 $LastChangedBy: aaronbreneman $
 $LastChangedDate: 2018-12-21 13:30:03 -0600 (Fri, 21 Dec 2018) $
 $LastChangedRevision: 26393 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/rbsp_efw_phasef_spinfit.pro $

</PRE><P>
<STRONG>(See <A href="rbsp_phasef/rbsp_efw_phasef_spinfit.pro">general/missions/rbsp/efw/rbsp_phasef/rbsp_efw_phasef_spinfit.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_READ_DE_MGSE">
<H2>RBSP_READ_DE_MGSE</H2></A>
<A HREF="#RBSP_EFW_PHASEF_SPINFIT (PROCEDURE)">[Previous Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Read dE = E_mgse - Emod_mgse
</PRE><P>
<STRONG>(See <A href="rbsp_phasef/rbsp_read_de_mgse.pro">general/missions/rbsp/efw/rbsp_phasef/rbsp_read_de_mgse.pro</A>)</STRONG><P>
<HR>
 
