<!-- This file was generated by mk_html_help.pro -->
<html>
 
<head>
<TITLE>projects/SPP/sweap/SPC/L3i/misc</TITLE>
</head>
 
<body>
<P>
This page was created by the IDL library routine 
<CODE>mk_html_help2</CODE>.
<br>
<P>
<STRONG>Last modified: </STRONG>Wed Aug 24 18:16:31 2022.<P>
 
<HR>
 
<A NAME="ROUTINELIST">
<H1>Directory Listing of Routines</H1></A>
<UL>
<H1>projects/SPP/sweap/SPC/L3i/misc</H1>
<LI><A HREF="#PSP_COMMON_SPC_FLAGINFO">PSP_COMMON_SPC_FLAGINFO</A>
<LI><A HREF="#PSP_FILTER_SWP">PSP_FILTER_SWP</A>
<LI><A HREF="#SIMPLE_GAPS">SIMPLE_GAPS</A>
<br>
</UL><P>
<HR>
 
<H1>Routine Descriptions</H1>
<A NAME="PSP_COMMON_SPC_FLAGINFO">
<H2>PSP_COMMON_SPC_FLAGINFO</H2></A>
<A HREF="#PSP_FILTER_SWP">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME: PSP_COMMON_SPC_INFO

DESCRIPTION:
  Common variables used in PSP/SWEAP/SPC routines 

CREATED BY: Ayris Narock (ADNET/GSFC) 2020

 $LastChangedBy: anarock $
 $LastChangedDate: 2020-10-27 12:50:05 -0700 (Tue, 27 Oct 2020) $
 $LastChangedRevision: 29302 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/sweap/SPC/L3i/misc/psp_common_spc_flaginfo.pro $
</PRE><P>
<STRONG>(See <A href="misc/psp_common_spc_flaginfo.pro">projects/SPP/sweap/SPC/L3i/misc/psp_common_spc_flaginfo.pro</A>)</STRONG><P>
<HR>
 
<A NAME="PSP_FILTER_SWP">
<H2>PSP_FILTER_SWP</H2></A>
<A HREF="#PSP_COMMON_SPC_FLAGINFO">[Previous Routine]</A>
<A HREF="#SIMPLE_GAPS">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME: PSP_FILTER_SWP

DESCRIPTION:
 Removed flagged values from PSP SWEAP SPC tplot variables based on selected
 quality flags.  See usage notes and available flag definitions by calling
 with the /HELP keyword.

 For each TVAR passed in a new tplot variable is created with the filtered 
 data.  The new name is of the form:  &lt;tvarname&gt;_{1,2,3}_XXXXXX 
 where each 'XX' is a 0 padded flag indicator sorted from lowest to highest.
 
 So, psp_filter_swp,'np_fit',[3,4] results in tvar named &quot;np_fit_3_0304&quot;
 Or, psp_filter_swp,'np_fit',0,status=2 results in tvar named &quot;np_fit_2_00&quot;
 
  
INPUT:
 TVARS:    (string/strarr) Elements are data handle names
             OR (int/intarr) tplot variable reference numbers
 DQFLAG:   (int/intarr) Elements indicate which of the data quality flags
             to filter on. Values from the set of integers 0 - 31           

KEYWORDS:
 HELP:   If set, print a listing of the available data quality flags and 
         their meaning.
 STATUS:  (int) From the set {1, 2, 3}. Indicates which flag statuses will be
             removed.  (default = 3)
             1: Remove only where the flag is explicitly marked as having 
                 bad/problematic/condition present/etc
             2: Remove (1) AND where status not determined (&quot;don't know&quot;)
             3: Remove all EXCEPT where explictly marked as 
                 good/nominal/condition not present/etc for all selected flags
             
             TODO: (what to do about the &quot;don't care&quot; encoding status?)

OUTPUTS:
 NAMES_OUT:  Named variable holding the tplot variable names created 
             from this filter. Order corresponds to the input array of tvar
             names, so that tvar[i] filtered is in names_out[i]

EXAMPLE:
  Keep only values explictly marked as good in the general flag
  for the 'psp_spc_np_fit' variable
  IDL&gt; psp_filter_swp,'psp_spc_np_fit',0,status=3
  
  Remove all values where flags 11 or 12 are explictly marked as bad
  for the 'psp_spc_np_fit' variable
  IDL&gt; psp_filter_swp,'psp_spc_np_fit',[11,12],status=1

CREATED BY: Ayris Narock (ADNET/GSFC) 2020

 $LastChangedBy: anarock $
 $LastChangedDate: 2021-01-04 11:00:24 -0800 (Mon, 04 Jan 2021) $
 $LastChangedRevision: 29570 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/sweap/SPC/L3i/misc/psp_filter_swp.pro $
</PRE><P>
<STRONG>(See <A href="misc/psp_filter_swp.pro">projects/SPP/sweap/SPC/L3i/misc/psp_filter_swp.pro</A>)</STRONG><P>
<HR>
 
<A NAME="SIMPLE_GAPS">
<H2>SIMPLE_GAPS</H2></A>
<A HREF="#PSP_FILTER_SWP">[Previous Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME: SIMPLE_GAPS

DESCRIPTION:
 Find indices into an array such that when filtered on these
 indices the resulting array has no more than one NaN value
 in a row.  The resulting array will not have a NaN in
 the first or last element of the array, only as an in-between element.
 
 Used in psp_dyplot to support properly iterating over data gaps when
 plotting confidence intervals in piecewise fashion.
 
 Expects data to be a 1D array.
     
INPUT:
 DATA:   1D array to reference for non finite values

OUTPUTS:
 KEEP:   Integer array of indices to use to filter the data array.

EXAMPLE:
   d = [6,4, !values.f_NaN, !values.f_NaN, 3, 1]
   simple_gaps, d, keep_index = keep
   d[keep]
     --&gt; [6,4, NaN, 3, 1]

CREATED BY: Ayris Narock (ADNET/GSFC) 2020

 $LastChangedBy: anarock $
 $LastChangedDate: 2020-10-27 12:50:05 -0700 (Tue, 27 Oct 2020) $
 $LastChangedRevision: 29302 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/projects/SPP/sweap/SPC/L3i/misc/simple_gaps.pro $
</PRE><P>
<STRONG>(See <A href="misc/simple_gaps.pro">projects/SPP/sweap/SPC/L3i/misc/simple_gaps.pro</A>)</STRONG><P>
<HR>
 
