<!-- This file was generated by mk_html_help.pro -->
<html>
 
<head>
<TITLE>general/missions/rbsp/efw/examples</TITLE>
</head>
 
<body>
<P>
This page was created by the IDL library routine 
<CODE>mk_html_help2</CODE>.
<br>
<P>
<STRONG>Last modified: </STRONG>Wed Aug  6 18:18:26 2025.<P>
 
<HR>
 
<A NAME="ROUTINELIST">
<H1>Directory Listing of Routines</H1></A>
<UL>
<H1>general/missions/rbsp/efw/examples</H1>
<LI><A HREF="#B1_STATUS_CRIB">B1_STATUS_CRIB</A>
<LI><A HREF="#MINI_GEM_CRIB">MINI_GEM_CRIB</A>
<LI><A HREF="#RBSP_BOOM_DIRECTIONS_CRIB">RBSP_BOOM_DIRECTIONS_CRIB</A>
<LI><A HREF="#RBSP_EFW_BURST_FA_ROTATE_CRIB">RBSP_EFW_BURST_FA_ROTATE_CRIB</A>
<LI><A HREF="#RBSP_EFW_CONVECTION_EFIELD_CRIB">RBSP_EFW_CONVECTION_EFIELD_CRIB
</A>
<LI><A HREF="#RBSP_EFW_DCFIELD_REMOVAL_CRIB">RBSP_EFW_DCFIELD_REMOVAL_CRIB</A>
<LI><A HREF="#RBSP_EFW_EDOTB_TO_ZERO_CRIB">RBSP_EFW_EDOTB_TO_ZERO_CRIB</A>
<LI><A HREF="#RBSP_EFW_POSITION_VELOCITY_CRIB">RBSP_EFW_POSITION_VELOCITY_CRIB
</A>
<LI><A HREF="#RBSP_EFW_POYNTING_FLUX_BURST_CRIB">
RBSP_EFW_POYNTING_FLUX_BURST_CRIB</A>
<LI><A HREF="#RBSP_EFW_POYNTING_FLUX_CRIB_SCOTT">
RBSP_EFW_POYNTING_FLUX_CRIB_SCOTT</A>
<LI><A HREF="#RBSP_EFW_POYNTING_FLUX_SURVEY_CRIB">
RBSP_EFW_POYNTING_FLUX_SURVEY_CRIB</A>
<LI><A HREF="#RBSP_EFW_SPEC_CRIB">RBSP_EFW_SPEC_CRIB</A>
<LI><A HREF="#RBSP_EFW_SPINFIT_CRIB">RBSP_EFW_SPINFIT_CRIB</A>
<LI><A HREF="#RBSP_EFW_SPINFIT_VXB_SUBTRACT_CRIB">
RBSP_EFW_SPINFIT_VXB_SUBTRACT_CRIB</A>
<LI><A HREF="#RBSP_EFW_SUMMARY_CRIB">RBSP_EFW_SUMMARY_CRIB</A>
<LI><A HREF="#RBSP_EFW_VXB_SUBTRACT_CRIB">RBSP_EFW_VXB_SUBTRACT_CRIB</A>
<br>Creates vxB subtracted tplot variables for the 32 S/s EFW efield data
<LI><A HREF="#RBSP_EFW_WAVEFORM_CRIB">RBSP_EFW_WAVEFORM_CRIB</A>
<LI><A HREF="#RBSP_EFW_XSPEC_CRIB">RBSP_EFW_XSPEC_CRIB</A>
<LI><A HREF="#RBSP_LOAD_COLLECTION">RBSP_LOAD_COLLECTION</A>
<LI><A HREF="#RBSP_LOAD_CONTACT">RBSP_LOAD_CONTACT</A>
<LI><A HREF="#RBSP_MAGEIS_EXAMPLE_CRIB_OLD">RBSP_MAGEIS_EXAMPLE_CRIB_OLD</A>
<LI><A HREF="#TWAVPOL_MODIFIED">TWAVPOL_MODIFIED</A>
<br>
</UL><P>
<HR>
 
<H1>Routine Descriptions</H1>
<A NAME="B1_STATUS_CRIB">
<H2>B1_STATUS_CRIB</H2></A>
<A HREF="#MINI_GEM_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: b1_status_crib.pro
 SYNTAX:
 PURPOSE: Create tplot variables pertaining to EFW burst existence
 INPUT:
 OUTPUT:
 KEYWORDS:
	PROCEDURE: .run b1_status_crib
 HISTORY: Created by Kris Kersten, kris.kersten@gmail.com
 VERSION:
   $LastChangedBy: nikos $
   $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
   $LastChangedRevision: 28720 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/b1_status_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/b1_status_crib.pro">general/missions/rbsp/efw/examples/b1_status_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="MINI_GEM_CRIB">
<H2>MINI_GEM_CRIB</H2></A>
<A HREF="#B1_STATUS_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_BOOM_DIRECTIONS_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: mini_gem_crib.pro
 SYNTAX:
 PURPOSE: EFW crib sheet for the mini-GEM meeting at Fall AGU 2012.
					 Loads a bunch of useful data products
 KEYWORDS:
 HISTORY: Aaron Breneman, UMN, Dec 2012 (awbrenem@gmail.com)

</PRE><P>
<STRONG>(See <A href="examples/mini_gem_crib.pro">general/missions/rbsp/efw/examples/mini_gem_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_BOOM_DIRECTIONS_CRIB">
<H2>RBSP_BOOM_DIRECTIONS_CRIB</H2></A>
<A HREF="#MINI_GEM_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_BURST_FA_ROTATE_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_boom_directions_crib
 SYNTAX:
 PURPOSE: find the pointing direction of the EFW booms in GSE coord
 INPUT: times -&gt; array of times to find boom directions for
		 probe -&gt; 'a' or 'b'
 OUTPUT: tplot variables of each antenna direction in GSE ['vecu_gse','vecv_gse','vecw_gse']
 KEYWORDS:
 HISTORY: Written by Aaron W Breneman 05/12/2014
 VERSION:
   $LastChangedBy: nikos $
   $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
   $LastChangedRevision: 28720 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_boom_directions_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_boom_directions_crib.pro">general/missions/rbsp/efw/examples/rbsp_boom_directions_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_BURST_FA_ROTATE_CRIB">
<H2>RBSP_EFW_BURST_FA_ROTATE_CRIB</H2></A>
<A HREF="#RBSP_BOOM_DIRECTIONS_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_CONVECTION_EFIELD_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_efw_burst_fa_rotate_crib
 SYNTAX:
 PURPOSE: Rotate RBSP EFW burst data to field-aligned coordinates
 INPUT:
 OUTPUT:
 KEYWORDS:
 HISTORY: Created by Aaron W Breneman, Univ. Minnesota  4/10/2014
 VERSION:
   $LastChangedBy: aaronbreneman $
   $LastChangedDate: 2020-09-11 13:35:30 -0700 (Fri, 11 Sep 2020) $
   $LastChangedRevision: 29139 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_burst_fa_rotate_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_burst_fa_rotate_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_burst_fa_rotate_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_CONVECTION_EFIELD_CRIB">
<H2>RBSP_EFW_CONVECTION_EFIELD_CRIB</H2></A>
<A HREF="#RBSP_EFW_BURST_FA_ROTATE_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_DCFIELD_REMOVAL_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_efw_convection_efield_crib
 SYNTAX:
 PURPOSE: Calculate RBSP convection electric field and velocity
 INPUT:
 OUTPUT:
 KEYWORDS:
 HISTORY: Written by Aaron W Breneman, July 2016. Based on Scott Thaller's crib
 VERSION:
   $LastChangedBy: nikos $
   $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
   $LastChangedRevision: 28720 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_convection_efield_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_convection_efield_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_convection_efield_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_DCFIELD_REMOVAL_CRIB">
<H2>RBSP_EFW_DCFIELD_REMOVAL_CRIB</H2></A>
<A HREF="#RBSP_EFW_CONVECTION_EFIELD_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_EDOTB_TO_ZERO_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
*****************************************************************************************

  FUNCTION :   rbsp_efw_DCfield_removal_crib
  PURPOSE  :   Subtract off DC magnetic field from Bw values. Saves as new tplot files


  REQUIRES:   Need: SSL THEMIS software and IDL Geopack DLM both found at
			   http://themis.ssl.berkeley.edu/software.shtml


  INPUT:
		probe   -&gt; 'a' or 'b'
		model   -&gt; Any of the Tsyganenko models or 'igrf'. Defaults to 't96'
		ql -&gt; set to load quicklook EMFISIS data
               cadence -&gt; cadence of EMFISIS data. 'hires', '4sec', '1sec'
               nodelete -&gt; don't delete various tplot
               variables upon exit
  _extra --&gt; useful keywords are:
         no_spice_load
         no_rbsp_efw_init

  EXAMPLES:

				Produces the following variables (ex for magname = 'rbspa_mag_gsm', model='t96')
					rbspa_mag_gsm_t96
					rbspa_mag_gsm_t96_dif

					If the model is not t89 then produces:
					rbspa_mag_gsm_t96_wind
					rbspa_mag_gsm_t96_wind_dif
					rbspa_mag_gsm_t96_ace
					rbspa_mag_gsm_t96_ace_dif
					rbspa_mag_gsm_t96_omni
					rbspa_mag_gsm_t96_omni_dif



   NOTES:    ruthlessly pilfered from THEMIS crib sheets
             Subtracts off Tsyganenko values using input from ACE, Wind and OMNI, as
			  well as user defined input.



   CREATED:  2012/12/12
   CREATED BY:  Aaron W. Breneman
    LAST MODIFIED:  08/26/2012   v1.0.0 - major update. Much simplified
    MODIFIED BY: AWB

*****************************************************************************************
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_dcfield_removal_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_dcfield_removal_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_EDOTB_TO_ZERO_CRIB">
<H2>RBSP_EFW_EDOTB_TO_ZERO_CRIB</H2></A>
<A HREF="#RBSP_EFW_DCFIELD_REMOVAL_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_POSITION_VELOCITY_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME: rbsp_efw_edotb_to_zero_crib.pro
PURPOSE: Crib sheet to calculate the RBSP spin-axis Efield (short boom) under the
 assumption that E*B=0.
CALLING SEQUENCE:
 rbsp_efw_edotb_to_zero_crib,'2014-01-01','a'
INPUT:
 date: e.g. '2014-01-01'
 probe: 'a' or 'b'
KEYWORDS:
 noremove - Don't remove ExMGSE (spinaxis) values when By/Bx&gt;3.732 or Bz/Bx&gt;3.732
 anglemin --&gt; Min allowable angle b/t spinplane and Bo. Defaults to 15 deg
            Smaller angles will lead to less removed data, but can result
            in larger errors due to division by small numbers

OUTPUT: tplot variables of the spinfit, MGSE electric field with xMGSE
 calculated assuming E*B=0
NOTES: Bad E*B=0 data are removed
 Spin axis values calculated from E*B=0 as
 Ex = -1*(EyBy + EzBz)/Bx

 The ratios By/Bx and Bz/Bx can fluctuate wildly when Bx gets too small. Therefore we
 require that these ratios are less than a certain size (i.e. sufficiently big Bx).
 The standard (from Cluster) is to assume that the angle between any of the spinplane directions
 (MGSE y and z in this case) and Bo is greater than 15 degrees.
 	delta = angle(Bz, Bo) &gt; 15
 	epsilon = angle(By, Bo) &gt; 15
 	gamma = angle(Bx, Bo) &lt; 75

 Writing out the dot products we get:
 	cos(delta) = Bz/Bo
 	cos(epsilon) = By/Bo
 	cos(gamma) = Bx/Bo

 We can rearrange these as:
 	By/Bx = cos(epsilon)/cos(gamma)
 	Bz/Bx = cos(delta)/cos(gamma)

 To find the max value of these ratios let epsilon = 15 deg, delta = 15, gamma = 75 deg.
 	By/Bx = 3.732
 	Bz/Bx = 3.732
HISTORY: Written by Aaron W Breneman (UMN) - 2013-06-19
$LastChangedBy: aaronbreneman $
$LastChangedDate: 2020-09-11 13:33:33 -0700 (Fri, 11 Sep 2020) $
$LastChangedRevision: 29137 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_edotb_to_zero_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_edotb_to_zero_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_edotb_to_zero_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_POSITION_VELOCITY_CRIB">
<H2>RBSP_EFW_POSITION_VELOCITY_CRIB</H2></A>
<A HREF="#RBSP_EFW_EDOTB_TO_ZERO_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_POYNTING_FLUX_BURST_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME: rbsp_efw_position_velocity_crib.pro
PURPOSE: Loads and plots RBSP (Van Allen probes) position and velocity related data
CALLING SEQUENCE:
 timespan,'2014-01-01'
 rbsp_efw_position_velocity_crib
INPUT:
KEYWORDS:
 probe = set to specify to load only &quot;a&quot; or &quot;b&quot; other than both.
 no_spice_load -&gt; set if you've already loaded the spice kernels
	noplot -&gt; set to avoid tplotting
	notrace -&gt; skip the ttrace2equator call. This takes a lot of computational time
 nospinaxis_calcs -&gt; skip the part that loads the spinaxis pointing direction.
   This can be problematic on certain dates. Only set if you don't need the
   spinaxis direction or the sc velocity in mGSE coord
 _extra --&gt; possible useful extra keywords include:
       no_spice_load
       no_rbsp_efw_init
OUTPUT: various tplot variables
HISTORY:
 Written by Aaron Breneman, UMN, Dec 2012
	email: awbrenem@gmail.com
REQUIRED: Need to have the SPICE ICY software package installed

$LastChangedBy: aaronbreneman $
$LastChangedDate: 2020-09-11 13:32:39 -0700 (Fri, 11 Sep 2020) $
$LastChangedRevision: 29136 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_position_velocity_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_position_velocity_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_position_velocity_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_POYNTING_FLUX_BURST_CRIB">
<H2>RBSP_EFW_POYNTING_FLUX_BURST_CRIB</H2></A>
<A HREF="#RBSP_EFW_POSITION_VELOCITY_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_POYNTING_FLUX_CRIB_SCOTT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_efw_poynting_flux_crib.pro
 SYNTAX:
 PURPOSE: Crib sheet for calling rbsp_poynting_flux.pro, which creates
					 Poynting flux tplot variables (including spectra) from EFW
					 and EMFISIS data in various coord systems. Plots results
 INPUT:
 OUTPUT:
 KEYWORDS:
	PROCEDURE: load EMFISIS data in GSE.
			Transform EMFISIS GSE -&gt; MGSE
			Load EFW despun waveform data in MGSE
			Call Poynting flux program
 HISTORY: Created by Aaron W Breneman, UMN awbrenem@gmail.com
 VERSION:
   $LastChangedBy: aaronbreneman $
   $LastChangedDate: 2020-09-11 13:39:04 -0700 (Fri, 11 Sep 2020) $
   $LastChangedRevision: 29141 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_poynting_flux_burst_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_poynting_flux_burst_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_poynting_flux_burst_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_POYNTING_FLUX_CRIB_SCOTT">
<H2>RBSP_EFW_POYNTING_FLUX_CRIB_SCOTT</H2></A>
<A HREF="#RBSP_EFW_POYNTING_FLUX_BURST_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_POYNTING_FLUX_SURVEY_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_efw_poynting_flux_survey_crib.pro
 SYNTAX:
 PURPOSE: Crib sheet for creating Poynting flux tplot variables from EFW and
          EMFISIS survey data.
          This is called by the program rbsp_efw_make_pflux.pro, but can
          be used independently.
 INPUT:  smoothing -&gt; period (sec) to smooth over
         detrending -&gt; period (sec) to detrend over
         cadence_mag -&gt; '1sec','4sec','hires'
         spinfit -&gt; spinfit the Efield data? Otherwise uses the 32 S/s MGSE data
 OUTPUT: tplot variables of Poynting flux in various coord systems
 KEYWORDS:
 NOTES:  The burst and tt0 and tt1 keywords were added (by Aaron) to test the
         results of this crib sheet with rbsp_poynting_flux.pro. They compare
         almost identically for a test chorus event. (see aaron_scott_pflux_comparison.pro)

 HISTORY: Adapted from Scott Thaller's Poynting flux crib by Aaron Breneman

 VERSION:
   $LastChangedBy: aaronbreneman $
   $LastChangedDate: 2020-09-11 13:39:41 -0700 (Fri, 11 Sep 2020) $
   $LastChangedRevision: 29143 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_poynting_flux_crib_scott.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_poynting_flux_crib_scott.pro">general/missions/rbsp/efw/examples/rbsp_efw_poynting_flux_crib_scott.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_POYNTING_FLUX_SURVEY_CRIB">
<H2>RBSP_EFW_POYNTING_FLUX_SURVEY_CRIB</H2></A>
<A HREF="#RBSP_EFW_POYNTING_FLUX_CRIB_SCOTT">[Previous Routine]</A>
<A HREF="#RBSP_EFW_SPEC_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_efw_poynting_flux_survey_crib.pro
 SYNTAX:
 PURPOSE: Crib sheet for creating Poynting flux tplot variables from EFW and
          EMFISIS data.
          This is called by the program rbsp_efw_make_pflux.pro, but can
          be used independently.
 INPUT:  smoothing -&gt; period (sec) to smooth over
         detrending -&gt; period (sec) to detrend over
         cadence_mag -&gt; '1sec','4sec','hires'
         spinfit -&gt; spinfit the Efield data? Otherwise uses the 32 S/s MGSE data
 OUTPUT: tplot variables of Poynting flux in various coord systems
 KEYWORDS:
 NOTES:  The burst and tt0 and tt1 keywords were added (by Aaron) to test the
         results of this crib sheet with rbsp_poynting_flux.pro. They compare
         almost identically for a test chorus event. (see aaron_scott_pflux_comparison.pro)

 HISTORY: Adapted from Scott Thaller's Poynting flux crib by Aaron Breneman

 VERSION:
   $LastChangedBy: aaronbreneman $
   $LastChangedDate: 2020-09-11 13:39:29 -0700 (Fri, 11 Sep 2020) $
   $LastChangedRevision: 29142 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_poynting_flux_survey_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_poynting_flux_survey_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_poynting_flux_survey_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_SPEC_CRIB">
<H2>RBSP_EFW_SPEC_CRIB</H2></A>
<A HREF="#RBSP_EFW_POYNTING_FLUX_SURVEY_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_SPINFIT_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_efw_spec_crib.pro
 SYNTAX:
 PURPOSE: Create tplot variables pertaining to RBSP EFW spectral products
 INPUT:
 OUTPUT:; SPEC returns 7 channels, with nominal data selection:
		SPEC0: E12AC
		SPEC1: E56AC
		SPEC2: SCMpar
		SPEC3: SCMperp
		SPEC4: SCMW
		SPEC5: V1AC
		SPEC6: V2AC

 KEYWORDS:
 HISTORY: ; Kris Kersten, UMN, June 2012 (kris.kersten@gmail.com)
 					 Modified by Aaron Breneman, UMN, Dec 2012 (awbrenem@gmail.com)

 VERSION:
   $LastChangedBy: nikos $
   $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
   $LastChangedRevision: 28720 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_spec_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_spec_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_spec_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_SPINFIT_CRIB">
<H2>RBSP_EFW_SPINFIT_CRIB</H2></A>
<A HREF="#RBSP_EFW_SPEC_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_SPINFIT_VXB_SUBTRACT_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_efw_spinfit_crib.pro
 SYNTAX:
 PURPOSE: Crib sheet for crating EFW spinfit electric field in spinning
          spacecraft coord (DSC)
 INPUT:
 OUTPUT:
 KEYWORDS:
 HISTORY: Created by Jianbao Tao, SSL/UCB.
 VERSION:
   $LastChangedBy: nikos $
   $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
   $LastChangedRevision: 28720 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_spinfit_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_spinfit_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_spinfit_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_SPINFIT_VXB_SUBTRACT_CRIB">
<H2>RBSP_EFW_SPINFIT_VXB_SUBTRACT_CRIB</H2></A>
<A HREF="#RBSP_EFW_SPINFIT_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_SUMMARY_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME: rbsp_efw_spinfit_vxb_subtract_crib.pro
PURPOSE: Create the vxb subtracted spinfit data product for EFW
CALLING SEQUENCE:
 timespan,'2014-01-01'
 rbsp_efw_spinfit_vxb_crib,'a'
INPUT: probe --&gt; 'a' or 'b'
KEYWORDS:
 ql -&gt; select to load EMFISIS quicklook data. Defaults to hires L3 data but
				quicklook data are available sooner.
	qa -&gt; select to load QA waveform data. Don't want to use this route for normal
				  data processing.
	hiresl3 -&gt; loads the EMFISIS high resolution 64 S/s L3 GSE data
 level -&gt; Level of EMFISIS data. Options are:
   'ql', 'l2', 'l3'. Defaults to EMFISIS L3 data
 boom_pair -&gt; select the boom pair for the spinfitting. Any pair is acceptable
 no_reload -&gt; use to not reload any of the base data. Useful if you want to run this
         crib sheet multiple times for different boom pairs.
 _extra --&gt; possible useful keywords include:
         no_spice_load

OUTPUT: tplot variables of spinfit, vxb subtracted electric field

NOTES: If doing spinfit on pairs 12, 34, we load the &quot;esvy&quot; waveform. This gives us the Efield array
(rbsp?_efw_esvy) as [[E12],[E34],[E56]].
This array is inputted into rbsp_spinfit.pro and the plane_dim is set to 0,1
depending on which component (E12 or E34) you want to spinfit off of.
**
For pairs other than 12, 34, 56, we have to load &quot;vsvy&quot; waveform and construct the components
manually. The first element of this array (normally E12) will be replaced with the new component.
For ex, for pair=24, the array (rbsp?_efw_esvy) will be [[E24],[E34],[E56]]. We'll then set plane_dim
to zero to use this component.

HISTORY: Written by Aaron W Breneman
         University of Minnesota
         2013-04-16
$LastChangedBy: aaronbreneman $
$LastChangedDate: 2020-10-15 10:55:25 -0700 (Thu, 15 Oct 2020) $
$LastChangedRevision: 29256 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_spinfit_vxb_subtract_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_spinfit_vxb_subtract_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_spinfit_vxb_subtract_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_SUMMARY_CRIB">
<H2>RBSP_EFW_SUMMARY_CRIB</H2></A>
<A HREF="#RBSP_EFW_SPINFIT_VXB_SUBTRACT_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_VXB_SUBTRACT_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_efw_summary_crib.pro
 SYNTAX:
 PURPOSE: Create tplot variables pertaining to EFW summary data
						(waveform, spec, xspec, filterbank)
 INPUT:
 OUTPUT:
 KEYWORDS:
 HISTORY: Kris Kersten, UMN, June 2012 (email: kris.kersten@gmail.com)
 VERSION:
   $LastChangedBy: nikos $
   $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
   $LastChangedRevision: 28720 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_summary_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_summary_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_summary_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_VXB_SUBTRACT_CRIB">
<H2>RBSP_EFW_VXB_SUBTRACT_CRIB</H2></A>
<A HREF="#RBSP_EFW_SUMMARY_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_WAVEFORM_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
NAME: rbsp_efw_vxb_subtract_crib.pro
PURPOSE:
 Creates vxB subtracted tplot variables for the 32 S/s EFW efield data
 ****NOTE: IF YOU DON'T NEED THE FULL 32 S/s RESOLUTION THEN CONSIDER USING
 ****rbsp_efw_spinfit_vxb_subtract_crib.pro
 ****THE DATA WILL BE AT SPINPERIOD CADENCE BUT WILL BE CLEANER

 WARNING!!! RESULTS ARE PRELIMINARY. DO NOT PUBLISH OR PRESENT THESE RESULTS
 WITHOUT FIRST CONSULTING THE EFW PI JOHN WYGANT &lt;wygan001@umn.edu&gt;

CALLING SEQUENCE:
 timespan,'2014-01-01'
 rbsp_efw_vxb_subtract_crib,'a'

INPUT: 'a' or 'b' for probe
KEYWORDS:
 ql -&gt; use EMFISIS quicklook UVW data instead of 4sec GSE L3. This will be
       despun and spinfit. This has the advantage of not having to wait for
       the EMFISIS L3 data set to be produced.
       Note: Defaults to 4-sec EMFISIS data in GSE. This is actually superior
       to the hires GSE data b/c it doesn't have spurious data spikes.
       It works about the same as JBT's method of despinning and then
       spinfitting the EMFISIS quicklook UVW data.

 hires -&gt; use EMFISIS hires L3 GSE data instead of 4sec GSE L3.
 qa -&gt; load the QA testing L1 EFW data instead of the usual L1 data
OUTPUT:
HISTORY:
 Created by Aaron Breneman, UMN, Dec 2012
	email: awbrenem@gmail.com
REQUIRES: THEMIS TDAS software
			 http://themis.ssl.berkeley.edu/software.shtml
		   as well as SPICE software

$LastChangedBy: nikos $
$LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
$LastChangedRevision: 28720 $
$URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_vxb_subtract_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_vxb_subtract_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_vxb_subtract_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_WAVEFORM_CRIB">
<H2>RBSP_EFW_WAVEFORM_CRIB</H2></A>
<A HREF="#RBSP_EFW_VXB_SUBTRACT_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_EFW_XSPEC_CRIB">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_efw_waveform_crib
 SYNTAX:
 PURPOSE: Loads and plots RBSP (Van Allen probes) waveform data
 KEYWORDS:
 HISTORY: Kris Kersten, UMN, June 2012 (kris.kersten@gmail.com)
 	Modified by Aaron Breneman, UMN, Dec 2012 (awbrenem@gmail.com)

 VERSION:
   $LastChangedBy: nikos $
   $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
   $LastChangedRevision: 28720 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_waveform_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_waveform_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_waveform_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_EFW_XSPEC_CRIB">
<H2>RBSP_EFW_XSPEC_CRIB</H2></A>
<A HREF="#RBSP_EFW_WAVEFORM_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_LOAD_COLLECTION">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_efw_xspec_crib.pro
 SYNTAX:
 PURPOSE: Create tplot variables pertaining to the EFW cross-spectral product
 INPUT:
 OUTPUT:
 KEYWORDS:
	PROCEDURE: .run b1_status_crib
 HISTORY: Kris Kersten, UMN, June 2012 (kris.kersten@gmail.com)
 				 Modified by Aaron Breneman, UMN, Dec 2012 (awbrenem@gmail.com)
 VERSION:
   $LastChangedBy: nikos $
   $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
   $LastChangedRevision: 28720 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_efw_xspec_crib.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_efw_xspec_crib.pro">general/missions/rbsp/efw/examples/rbsp_efw_xspec_crib.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_LOAD_COLLECTION">
<H2>RBSP_LOAD_COLLECTION</H2></A>
<A HREF="#RBSP_EFW_XSPEC_CRIB">[Previous Routine]</A>
<A HREF="#RBSP_LOAD_CONTACT">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 NAME: rbsp_load_collection
 SYNTAX: 
 PURPOSE: Load collection time &lt;remote_dir&gt;/burst_selection/rbspx_b1_rec.dat.
 INPUT:   
	cts, out, dblarr[n,2], req. Collection times in UT second.
   probe, in, 'a' or 'b', opt. Default is 'a'.
 OUTPUT: 
 KEYWORDS: 
 HISTORY: 2014-04-09, created by Sheng Tian, UMN
 VERSION: 
   $LastChangedBy: nikos $
   $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
   $LastChangedRevision: 28720 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_load_collection.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_load_collection.pro">general/missions/rbsp/efw/examples/rbsp_load_collection.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_LOAD_CONTACT">
<H2>RBSP_LOAD_CONTACT</H2></A>
<A HREF="#RBSP_LOAD_COLLECTION">[Previous Routine]</A>
<A HREF="#RBSP_MAGEIS_EXAMPLE_CRIB_OLD">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Type: procedure.
 Purpose: Load contact time &lt;remote_dir&gt;/MOC_data_products/RBSPX/contact_plan'.
 Parameters:
   cts, out, dblarr[n,2], req. Contact times in UT second.
   probe, in, 'a' or 'b', opt. Default is 'a'.
 Keywords: none.
 Notes: none.
 Dependence: tdas.
 History:
   2014-04-09, Sheng Tian, create.
</PRE><P>
<STRONG>(See <A href="examples/rbsp_load_contact.pro">general/missions/rbsp/efw/examples/rbsp_load_contact.pro</A>)</STRONG><P>
<HR>
 
<A NAME="RBSP_MAGEIS_EXAMPLE_CRIB_OLD">
<H2>RBSP_MAGEIS_EXAMPLE_CRIB_OLD</H2></A>
<A HREF="#RBSP_LOAD_CONTACT">[Previous Routine]</A>
<A HREF="#TWAVPOL_MODIFIED">[Next Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>
 Deprecated, 2020-04-13, jmm
 
 NAME: rbsp_mageis_example_crib.pro
 SYNTAX:
 PURPOSE: Crib sheet showing how to load MagEIS data
 INPUT:
 OUTPUT:
 KEYWORDS:
 HISTORY: Created by Aaron Breneman
 VERSION:
   $LastChangedBy: nikos $
   $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
   $LastChangedRevision: 28720 $
   $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/rbsp_mageis_example_crib_old.pro $
</PRE><P>
<STRONG>(See <A href="examples/rbsp_mageis_example_crib_old.pro">general/missions/rbsp/efw/examples/rbsp_mageis_example_crib_old.pro</A>)</STRONG><P>
<HR>
 
<A NAME="TWAVPOL_MODIFIED">
<H2>TWAVPOL_MODIFIED</H2></A>
<A HREF="#RBSP_MAGEIS_EXAMPLE_CRIB_OLD">[Previous Routine]</A>
<A HREF="#ROUTINELIST">[List of Routines]</A>
<PRE>

 NAME:twavpol

PURPOSE:To perform polarisation analysis of three orthogonal component time
         series data, using tplot variables.

EXAMPLE: twavpol,'in_data',prefix='in_data',freqline=fl

INPUTS: tvarname: the name of the tplot variable upon which it will
operate

prefix(optional): the prefix to be assigned to the tplot variables that will be
output, defaults to tvarname


       Subroutine assumes data are in righthanded fieldaligned
	coordinate system with Z pointing the direction
       of the ambient magnetic field.

Keywords:
  nopfft(optional) = Number of points in FFT

  steplength(optional) = The amount of overlap between successive FFT intervals

  bin_freq (optional): No. of bins in frequency domain

OUTPUTS:
          error(optional): named variable in which to return the
          error state of this procedure call. 1 = success, 0 = failure

          freqline(optional): assign a named variable to this keyword
          to store the frequencies of each y-index

         timeline(optional): assign a named variable to this keyword
         to store the times of each x-index

The program outputs five spectral results derived from the
         fourier transform of the covariance matrix (spectral matrix)
This version stores these outputs as tplot variables with the
specified prefix
         These are follows:

         Wave power: On a linear scale, at this stage no units

         Degree of Polarisation:
		This is similar to a measure of coherency between the input
		signals, however unlike coherency it is invariant under
		coordinate transformation and can detect pure state waves
		which may exist in one channel only.100% indicates a pure
		state wave. Less than 70% indicates noise. For more
		information see J. C. Samson and J. V. Olson 'Some comments
		on the description of the polarization states
		of waves' Geophys. J. R. Astr. Soc. (1980) v61 115-130

   Wavenormal Angle:
     The angle between the direction of minimum variance
     calculated from the complex off diagonal elements of the
     spectral matrix and the Z direction of the input ac field data.
     for magnetic field data in field aligned coordinates this is the
     wavenormal angle assuming a plane wave. See:
     Means, J. D. (1972), Use of the three-dimensional covariance
     matrix in analyzing the polarization properties of plane waves,
     J. Geophys. Res., 77(28), 5551-5559,
     doi:10.1029/JA077i028p05551.

   Ellipticity:
     The ratio (minor axis)/(major axis) of the ellipse transcribed
     by the field variations of the components transverse to the
     Z direction (Samson and Olson, 1980). The sign indicates
     the direction of rotation of the field vector in the plane (cf.
     Means, (1972)).
     Negative signs refer to left-handed rotation about the Z
     direction. In the field aligned coordinate system these signs
     refer to plasma waves of left and right handed polarization.

         Helicity:Similar to Ellipticity except defined in terms of the
	direction of minimum variance instead of Z. Stricltly the Helicity
	is defined in terms of the wavenormal direction or k.
	However since from single point observations the
	sense of k cannot be determined,  helicity here is
	simply the ratio of the minor to major axis transverse to the
       minimum variance direction without sign.

NOTES:
1. Although the input is in the form of a tplot variable, the
output is currently in the form of arrays

2. -If one component is an order of magnitude or more  greater than
	the other two then the polarisation results saturate and erroneously
	indicate high degrees of polarisation at all times and
	frequencies.

3. Time series should be eyeballed before running the program.
	 For time series containing very rapid changes or spikes
	 the usual problems with Fourier analysis arise.
	 Care should be taken in evaluating degree of polarisation results.

4. For meaningful results there should be significant wave power at the
	 frequency where the polarisation approaches
	 100%. Remembercomparing two straight lines yields 100% polarisation.



 $LastChangedBy: nikos $
 $LastChangedDate: 2020-05-21 20:36:46 -0700 (Thu, 21 May 2020) $
 $LastChangedRevision: 28720 $
 $URL: svn+ssh://thmsvn@ambrosia.ssl.berkeley.edu/repos/spdsoft/trunk/general/missions/rbsp/efw/examples/twavpol_modified.pro $
</PRE><P>
<STRONG>(See <A href="examples/twavpol_modified.pro">general/missions/rbsp/efw/examples/twavpol_modified.pro</A>)</STRONG><P>
<HR>
 
